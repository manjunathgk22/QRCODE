import BaseStore from "./BaseStore";
import { observable, action } from "mobx";
import Navigation from "../util/Navigation";
const response = { "response": [{ "id": 1, "status": true, "name": "vishnu", "createdAt": "2020-07-27T11:55:53.732Z", "updatedAt": "2020-07-27T11:55:53.732Z", "restaurant_id": 1000, "restaurantId": null, "qrcodes": [{ "id": 1000, "code": "84765684-5cfa-47c1-b409-ea5850f87f13", "canonicalname": "", "name": "TABLE1", "status": true, "occupied": false, "createdAt": "2020-07-27T11:55:39.627Z", "updatedAt": "2020-07-27T11:55:53.740Z", "restaurant_id": 1000, "service_id": null, "menu_id": 1, "restaurantId": null, "menuId": null, "serviceId": null }, { "id": 1001, "code": "659fc5fa-ace5-49a7-8858-ba11f7882f6b", "canonicalname": "", "name": "TABLE2", "status": true, "occupied": false, "createdAt": "2020-07-27T11:55:39.671Z", "updatedAt": "2020-07-27T11:55:53.746Z", "restaurant_id": 1000, "service_id": null, "menu_id": 1, "restaurantId": null, "menuId": null, "serviceId": null }, { "id": 1002, "code": "5e0066d2-bb1b-4ccb-86f2-0e78dfd09d5e", "canonicalname": "", "name": "TABLE3", "status": true, "occupied": false, "createdAt": "2020-07-27T11:55:39.688Z", "updatedAt": "2020-07-27T11:55:53.749Z", "restaurant_id": 1000, "service_id": null, "menu_id": 1, "restaurantId": null, "menuId": null, "serviceId": null }, { "id": 1003, "code": "957431cc-36c5-4965-aaa0-ce50c261f90a", "canonicalname": "", "name": "TABLE4", "status": true, "occupied": false, "createdAt": "2020-07-27T11:55:39.700Z", "updatedAt": "2020-07-27T11:55:53.752Z", "restaurant_id": 1000, "service_id": null, "menu_id": 1, "restaurantId": null, "menuId": null, "serviceId": null }, { "id": 1004, "code": "f089af37-2f69-468c-a707-0fc815db8602", "canonicalname": "", "name": "TABLE5", "status": true, "occupied": false, "createdAt": "2020-07-27T11:55:39.710Z", "updatedAt": "2020-07-27T11:55:53.755Z", "restaurant_id": 1000, "service_id": null, "menu_id": 1, "restaurantId": null, "menuId": null, "serviceId": null }, { "id": 1005, "code": "74fa70ed-ead8-49ce-960a-3fc6dc16c6ad", "canonicalname": "", "name": "TABLE6", "status": true, "occupied": false, "createdAt": "2020-07-27T11:55:39.718Z", "updatedAt": "2020-07-27T11:55:53.758Z", "restaurant_id": 1000, "service_id": null, "menu_id": 1, "restaurantId": null, "menuId": null, "serviceId": null }, { "id": 1006, "code": "e6a48d1a-acae-4229-a96c-2d24e1cc4990", "canonicalname": "", "name": "TABLE7", "status": true, "occupied": false, "createdAt": "2020-07-27T11:55:39.727Z", "updatedAt": "2020-07-27T11:55:53.762Z", "restaurant_id": 1000, "service_id": null, "menu_id": 1, "restaurantId": null, "menuId": null, "serviceId": null }, { "id": 1007, "code": "f651c384-ad51-4d10-b8b8-5a586f43dcb2", "canonicalname": "", "name": "TABLE8", "status": true, "occupied": false, "createdAt": "2020-07-27T11:55:39.734Z", "updatedAt": "2020-07-27T11:55:53.769Z", "restaurant_id": 1000, "service_id": null, "menu_id": 1, "restaurantId": null, "menuId": null, "serviceId": null }, { "id": 1008, "code": "d3654f28-69f1-4b2a-bd73-d73d41fe6bc3", "canonicalname": "", "name": "TABLE9", "status": true, "occupied": false, "createdAt": "2020-07-27T11:55:39.746Z", "updatedAt": "2020-07-27T11:55:53.772Z", "restaurant_id": 1000, "service_id": null, "menu_id": 1, "restaurantId": null, "menuId": null, "serviceId": null }, { "id": 1009, "code": "fa678dd3-f824-45f6-afd0-6aeb926933b7", "canonicalname": "", "name": "TABLE10", "status": true, "occupied": false, "createdAt": "2020-07-27T11:55:39.754Z", "updatedAt": "2020-07-27T11:55:53.775Z", "restaurant_id": 1000, "service_id": null, "menu_id": 1, "restaurantId": null, "menuId": null, "serviceId": null }], "menucategories": [{ "id": 1, "status": true, "name": "breakfast", "description": "", "createdAt": "2020-07-27T11:56:07.129Z", "updatedAt": "2020-07-27T11:56:07.129Z", "menu_id": 1, "menuId": null, "menuitems": [{ "id": 1, "status": true, "name": "Idli", "description": "Idli Description", "images": ["idli.jpeg1595850984284.jpeg"], "cost": 60, "createdAt": "2020-07-27T11:56:25.682Z", "updatedAt": "2020-07-27T11:56:25.682Z", "menu_category_id": 1, "menucategoryId": null }, { "id": 2, "status": true, "name": "Dosa", "description": "dosa description", "images": ["download.jpeg1595851003126.jpeg"], "cost": 60, "createdAt": "2020-07-27T11:56:44.276Z", "updatedAt": "2020-07-27T11:56:44.276Z", "menu_category_id": 1, "menucategoryId": null }, { "id": 3, "status": true, "name": "uthapa", "description": "uthapa description", "images": ["uthapa.jpeg1595851025454.jpeg"], "cost": 80, "createdAt": "2020-07-27T11:57:06.557Z", "updatedAt": "2020-07-27T11:57:06.557Z", "menu_category_id": 1, "menucategoryId": null }] }, { "id": 2, "status": true, "name": "North Indian", "description": "", "createdAt": "2020-07-27T11:57:13.842Z", "updatedAt": "2020-07-27T11:57:13.842Z", "menu_id": 1, "menuId": null, "menuitems": [{ "id": 4, "status": true, "name": "Paneer Tikka", "description": "Paneer Tikka Description", "images": ["paneer tikka .jpeg1595851060625.jpeg"], "cost": 200, "createdAt": "2020-07-27T11:57:41.541Z", "updatedAt": "2020-07-27T11:57:41.541Z", "menu_category_id": 2, "menucategoryId": null }, { "id": 5, "status": true, "name": "Palak Paneer", "description": "palak paneer description", "images": ["Palak paneer.jpeg1595851080318.jpeg"], "cost": 220, "createdAt": "2020-07-27T11:58:01.087Z", "updatedAt": "2020-07-27T11:58:01.087Z", "menu_category_id": 2, "menucategoryId": null }, { "id": 6, "status": true, "name": "Aloo Gobi", "description": "Aloo Gobi Description", "images": ["Aloo gobi.jpeg1595851101894.jpeg"], "cost": 30, "createdAt": "2020-07-27T11:58:22.790Z", "updatedAt": "2020-07-27T11:58:22.790Z", "menu_category_id": 2, "menucategoryId": null }, { "id": 7, "status": true, "name": "Kulcha", "description": "Kulcha description", "images": ["Kulcha.jpeg1595851120816.jpeg"], "cost": 40, "createdAt": "2020-07-27T11:58:41.488Z", "updatedAt": "2020-07-27T11:58:41.488Z", "menu_category_id": 2, "menucategoryId": null }] }, { "id": 3, "status": true, "name": "South Indian", "description": "", "createdAt": "2020-07-27T11:58:50.082Z", "updatedAt": "2020-07-27T11:58:50.082Z", "menu_id": 1, "menuId": null, "menuitems": [{ "id": 8, "status": true, "name": "Bisi Bele Bath", "description": "Bisi Bele Bath Description", "images": ["Bisi Bele Bath.jpeg1595851149156.jpeg"], "cost": 80, "createdAt": "2020-07-27T11:59:09.985Z", "updatedAt": "2020-07-27T11:59:09.985Z", "menu_category_id": 3, "menucategoryId": null }, { "id": 9, "status": true, "name": "Lemon Rice", "description": "Lemon Rice description", "images": ["Chitranna.jpeg1595851173824.jpeg"], "cost": 80, "createdAt": "2020-07-27T11:59:34.757Z", "updatedAt": "2020-07-27T11:59:34.757Z", "menu_category_id": 3, "menucategoryId": null }] }, { "id": 4, "status": true, "name": "Deserts", "description": "", "createdAt": "2020-07-27T11:59:50.812Z", "updatedAt": "2020-07-27T11:59:50.812Z", "menu_id": 1, "menuId": null, "menuitems": [{ "id": 10, "status": true, "name": "Mango 1 scoop", "description": "", "images": ["download (1).jpeg1595851209129.jpeg"], "cost": 100, "createdAt": "2020-07-27T12:00:09.935Z", "updatedAt": "2020-07-27T12:00:09.935Z", "menu_category_id": 4, "menucategoryId": null }, { "id": 11, "status": true, "name": "cone Ice cream", "description": "cone ice cream description", "images": ["download (3).jpeg1595851231947.jpeg"], "cost": 50, "createdAt": "2020-07-27T12:00:50.069Z", "updatedAt": "2020-07-27T12:00:50.069Z", "menu_category_id": 4, "menucategoryId": null }] }] }] };

export default class customerStore extends BaseStore {
    @observable test = 'hello'
    @observable idValue = ''
    @observable menuData = response.response;
    @observable toastMessage = [];
    @observable totalCount = 0;
    @observable subTotal = 0;
    @observable isLoading = false;

    setIsLoading(value){
        this.isLoading = value;
    }
    //calculate subtotal
    @action calculateSubTotal = async () => {
        this.subTotal = 0;
        this.menuData[0].menucategories.map(menucategory => {
            menucategory.menuitems.map(menu => {
                if (menu.quantity > 0) {
                    this.subTotal = this.subTotal + (menu.quantity * menu.cost)
                }
            })
        })
    }

    @action handleSubmit = async () => {

        try {
            //const response = await apiRequest.getMenudetails(this.idValue);
            const response = { "response": [{ "id": 1, "status": true, "name": "vishnu", "createdAt": "2020-07-27T11:55:53.732Z", "updatedAt": "2020-07-27T11:55:53.732Z", "restaurant_id": 1000, "restaurantId": null, "qrcodes": [{ "id": 1000, "code": "84765684-5cfa-47c1-b409-ea5850f87f13", "canonicalname": "", "name": "TABLE1", "status": true, "occupied": false, "createdAt": "2020-07-27T11:55:39.627Z", "updatedAt": "2020-07-27T11:55:53.740Z", "restaurant_id": 1000, "service_id": null, "menu_id": 1, "restaurantId": null, "menuId": null, "serviceId": null }, { "id": 1001, "code": "659fc5fa-ace5-49a7-8858-ba11f7882f6b", "canonicalname": "", "name": "TABLE2", "status": true, "occupied": false, "createdAt": "2020-07-27T11:55:39.671Z", "updatedAt": "2020-07-27T11:55:53.746Z", "restaurant_id": 1000, "service_id": null, "menu_id": 1, "restaurantId": null, "menuId": null, "serviceId": null }, { "id": 1002, "code": "5e0066d2-bb1b-4ccb-86f2-0e78dfd09d5e", "canonicalname": "", "name": "TABLE3", "status": true, "occupied": false, "createdAt": "2020-07-27T11:55:39.688Z", "updatedAt": "2020-07-27T11:55:53.749Z", "restaurant_id": 1000, "service_id": null, "menu_id": 1, "restaurantId": null, "menuId": null, "serviceId": null }, { "id": 1003, "code": "957431cc-36c5-4965-aaa0-ce50c261f90a", "canonicalname": "", "name": "TABLE4", "status": true, "occupied": false, "createdAt": "2020-07-27T11:55:39.700Z", "updatedAt": "2020-07-27T11:55:53.752Z", "restaurant_id": 1000, "service_id": null, "menu_id": 1, "restaurantId": null, "menuId": null, "serviceId": null }, { "id": 1004, "code": "f089af37-2f69-468c-a707-0fc815db8602", "canonicalname": "", "name": "TABLE5", "status": true, "occupied": false, "createdAt": "2020-07-27T11:55:39.710Z", "updatedAt": "2020-07-27T11:55:53.755Z", "restaurant_id": 1000, "service_id": null, "menu_id": 1, "restaurantId": null, "menuId": null, "serviceId": null }, { "id": 1005, "code": "74fa70ed-ead8-49ce-960a-3fc6dc16c6ad", "canonicalname": "", "name": "TABLE6", "status": true, "occupied": false, "createdAt": "2020-07-27T11:55:39.718Z", "updatedAt": "2020-07-27T11:55:53.758Z", "restaurant_id": 1000, "service_id": null, "menu_id": 1, "restaurantId": null, "menuId": null, "serviceId": null }, { "id": 1006, "code": "e6a48d1a-acae-4229-a96c-2d24e1cc4990", "canonicalname": "", "name": "TABLE7", "status": true, "occupied": false, "createdAt": "2020-07-27T11:55:39.727Z", "updatedAt": "2020-07-27T11:55:53.762Z", "restaurant_id": 1000, "service_id": null, "menu_id": 1, "restaurantId": null, "menuId": null, "serviceId": null }, { "id": 1007, "code": "f651c384-ad51-4d10-b8b8-5a586f43dcb2", "canonicalname": "", "name": "TABLE8", "status": true, "occupied": false, "createdAt": "2020-07-27T11:55:39.734Z", "updatedAt": "2020-07-27T11:55:53.769Z", "restaurant_id": 1000, "service_id": null, "menu_id": 1, "restaurantId": null, "menuId": null, "serviceId": null }, { "id": 1008, "code": "d3654f28-69f1-4b2a-bd73-d73d41fe6bc3", "canonicalname": "", "name": "TABLE9", "status": true, "occupied": false, "createdAt": "2020-07-27T11:55:39.746Z", "updatedAt": "2020-07-27T11:55:53.772Z", "restaurant_id": 1000, "service_id": null, "menu_id": 1, "restaurantId": null, "menuId": null, "serviceId": null }, { "id": 1009, "code": "fa678dd3-f824-45f6-afd0-6aeb926933b7", "canonicalname": "", "name": "TABLE10", "status": true, "occupied": false, "createdAt": "2020-07-27T11:55:39.754Z", "updatedAt": "2020-07-27T11:55:53.775Z", "restaurant_id": 1000, "service_id": null, "menu_id": 1, "restaurantId": null, "menuId": null, "serviceId": null }], "menucategories": [{ "id": 1, "status": true, "name": "breakfast", "description": "", "createdAt": "2020-07-27T11:56:07.129Z", "updatedAt": "2020-07-27T11:56:07.129Z", "menu_id": 1, "menuId": null, "menuitems": [{ "id": 1, "status": true, "name": "Idli", "description": "Idli Description", "images": ["idli.jpeg1595850984284.jpeg"], "cost": 60, "createdAt": "2020-07-27T11:56:25.682Z", "updatedAt": "2020-07-27T11:56:25.682Z", "menu_category_id": 1, "menucategoryId": null }, { "id": 2, "status": true, "name": "Dosa", "description": "dosa description", "images": ["download.jpeg1595851003126.jpeg"], "cost": 60, "createdAt": "2020-07-27T11:56:44.276Z", "updatedAt": "2020-07-27T11:56:44.276Z", "menu_category_id": 1, "menucategoryId": null }, { "id": 3, "status": true, "name": "uthapa", "description": "uthapa description", "images": ["uthapa.jpeg1595851025454.jpeg"], "cost": 80, "createdAt": "2020-07-27T11:57:06.557Z", "updatedAt": "2020-07-27T11:57:06.557Z", "menu_category_id": 1, "menucategoryId": null }] }, { "id": 2, "status": true, "name": "North Indian", "description": "", "createdAt": "2020-07-27T11:57:13.842Z", "updatedAt": "2020-07-27T11:57:13.842Z", "menu_id": 1, "menuId": null, "menuitems": [{ "id": 4, "status": true, "name": "Paneer Tikka", "description": "Paneer Tikka Description", "images": ["paneer tikka .jpeg1595851060625.jpeg"], "cost": 200, "createdAt": "2020-07-27T11:57:41.541Z", "updatedAt": "2020-07-27T11:57:41.541Z", "menu_category_id": 2, "menucategoryId": null }, { "id": 5, "status": true, "name": "Palak Paneer", "description": "palak paneer description", "images": ["Palak paneer.jpeg1595851080318.jpeg"], "cost": 220, "createdAt": "2020-07-27T11:58:01.087Z", "updatedAt": "2020-07-27T11:58:01.087Z", "menu_category_id": 2, "menucategoryId": null }, { "id": 6, "status": true, "name": "Aloo Gobi", "description": "Aloo Gobi Description", "images": ["Aloo gobi.jpeg1595851101894.jpeg"], "cost": 30, "createdAt": "2020-07-27T11:58:22.790Z", "updatedAt": "2020-07-27T11:58:22.790Z", "menu_category_id": 2, "menucategoryId": null }, { "id": 7, "status": true, "name": "Kulcha", "description": "Kulcha description", "images": ["Kulcha.jpeg1595851120816.jpeg"], "cost": 40, "createdAt": "2020-07-27T11:58:41.488Z", "updatedAt": "2020-07-27T11:58:41.488Z", "menu_category_id": 2, "menucategoryId": null }] }, { "id": 3, "status": true, "name": "South Indian", "description": "", "createdAt": "2020-07-27T11:58:50.082Z", "updatedAt": "2020-07-27T11:58:50.082Z", "menu_id": 1, "menuId": null, "menuitems": [{ "id": 8, "status": true, "name": "Bisi Bele Bath", "description": "Bisi Bele Bath Description", "images": ["Bisi Bele Bath.jpeg1595851149156.jpeg"], "cost": 80, "createdAt": "2020-07-27T11:59:09.985Z", "updatedAt": "2020-07-27T11:59:09.985Z", "menu_category_id": 3, "menucategoryId": null }, { "id": 9, "status": true, "name": "Lemon Rice", "description": "Lemon Rice description", "images": ["Chitranna.jpeg1595851173824.jpeg"], "cost": 80, "createdAt": "2020-07-27T11:59:34.757Z", "updatedAt": "2020-07-27T11:59:34.757Z", "menu_category_id": 3, "menucategoryId": null }] }, { "id": 4, "status": true, "name": "Deserts", "description": "", "createdAt": "2020-07-27T11:59:50.812Z", "updatedAt": "2020-07-27T11:59:50.812Z", "menu_id": 1, "menuId": null, "menuitems": [{ "id": 10, "status": true, "name": "Mango 1 scoop", "description": "", "images": ["download (1).jpeg1595851209129.jpeg"], "cost": 100, "createdAt": "2020-07-27T12:00:09.935Z", "updatedAt": "2020-07-27T12:00:09.935Z", "menu_category_id": 4, "menucategoryId": null }, { "id": 11, "status": true, "name": "cone Ice cream", "description": "cone ice cream description", "images": ["download (3).jpeg1595851231947.jpeg"], "cost": 50, "createdAt": "2020-07-27T12:00:50.069Z", "updatedAt": "2020-07-27T12:00:50.069Z", "menu_category_id": 4, "menucategoryId": null }] }] }] };
            this.menuData = response.response;
            Navigation.push('/customer/menu')
            //    if(response.status === apiRequest.STATUS.SUCCESS){
            //         this.menuData = response.data.response.menuData;
            //         Navigation.push('/customer/menu')
            //    }else{
            //     this.toastMessage = [
            //         {
            //             id: Date.now(),
            //             title: "Failure",
            //             description: "Something Went Wrong",
            //             backgroundColor: "#fd3753",
            //             icon: error,
            //         },
            //     ]
            //    }

        } catch (error) {
            this.toastMessage = [
                {
                    id: Date.now(),
                    title: "Failure",
                    description: "Something Went Wrong",
                    backgroundColor: "#fd3753",
                    icon: error,
                },
            ]
        }
    }

    @action handleadd = async (categoryIndex, menuItemIndex, from = 'add', isCalculate) => {
        try {
            if (from === 'add') {
                this.menuData[0].menucategories[categoryIndex].menuitems[menuItemIndex].quantity = this.menuData[0].menucategories[categoryIndex].menuitems[menuItemIndex].quantity ? this.menuData[0].menucategories[categoryIndex].menuitems[menuItemIndex].quantity + 1 : 1
            } else {
                this.menuData[0].menucategories[categoryIndex].menuitems[menuItemIndex].quantity = this.menuData[0].menucategories[categoryIndex].menuitems[menuItemIndex].quantity ? this.menuData[0].menucategories[categoryIndex].menuitems[menuItemIndex].quantity - 1 : 0
            }
            this.totalCount = 0;
            this.menuData[0].menucategories.map(menucategory => (menucategory.menuitems.map(menuitem => {
                if (menuitem.quantity) {
                    this.totalCount += menuitem.quantity
                }
            })))
            this.menuData = [...this.menuData]
        } catch (error) {

        }
       /*  if (isCalculate)*/
            this.calculateSubTotal() 
    }
}